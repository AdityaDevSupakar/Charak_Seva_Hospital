<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Slot</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 20px;
            background-color: rgb(112, 131, 250);
            overflow-x: hidden;
        }

        .frameset {
            border: 1px solid navy;
            padding: 20px;
            margin-bottom: 20px;
            background-color: rgb(58, 192, 250);
        }

        .error {
            color: red;
            font-size: 0.9em;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2 class="text-center mb-3 bg-info"><u>BOOK APPOINTMENT</u></h2>

        <!-- Form starts -->
        <form id="registrationForm" onsubmit="return validateForm()" action="Book Slot.php" method="post">
            <!-- Top FrameSet: Patient Details -->
            <div class="frameset">
                <h6>NAME :</h6>
                <div class="row mb-3">
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="firstname" name="firstname" required
                            placeholder="First Name">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="middlename" name="middlename"
                            placeholder="Middle Name">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="lastname" name="lastname" required
                            placeholder="Last Name">
                    </div>
                </div>
                <h6>FATHER's NAME :</h6>
                <div class="row mb-3">
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="f_firstname" name="f_firstname" required
                            placeholder="First Name">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="f_middlename" name="f_middlename"
                            placeholder="Middle Name">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="f_lastname" name="f_lastname" required
                            placeholder="Last Name">
                    </div>
                </div>
                <h6>MOTHER's NAME :</h6>
                <div class="row mb-3">
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="m_firstname" name="m_firstname" required
                            placeholder="First Name">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="m_middlename" name="m_middlename"
                            placeholder="Middle Name">
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="m_lastname" name="m_lastname" required
                            placeholder="Last Name">
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <h6>GENDER :</h6>
                        <select class="form-control" id="gender" name="gender" required>
                            <option value="" disabled selected>Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                        <span class="error" id="genderError"></span>
                    </div>
                    <div class="col-md-4">
                        <h6>DATE OF BIRTH :</h6>
                        <input type="date" class="form-control" id="dob" name="dob" required onchange="calculateAge()">
                        <span class="error" id="dobError"></span>
                    </div>
                    <div class="col-md-4">
                        <h6>CURRENT AGE :</h6>
                        <input type="text" class="form-control" id="age" name="age" readonly>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <h6>MOBILE :</h6>
                        <input type="number" class="form-control" id="mobile" name="mobile" maxlength="10" required>
                        <span class="error" id="mobileError"></span>
                    </div>
                    <div class="col-md-8">
                        <h6>ADDRESS :</h6>
                        <input type="text" class="form-control" id="address" name="address" required>
                    </div>
                </div>

                <div class="mb-3">
                    <h6>REASON OF VISIT :</h6>
                    <textarea class="form-control" id="reason" name="reason" rows="3"
                        placeholder="Start writing your reason from here." required></textarea>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center">
                <button type="submit" class="btn btn-primary w-100"><b>BOOK SLOT</b></button>
            </div>
        </form>
    </div>

    <!-- JavaScript to calculate age and validate form -->
    <script>
        function calculateAge() {
            const dob = document.getElementById('dob').value;
            if (dob) {
                const today = new Date();
                const birthDate = new Date(dob);
                let age = today.getFullYear() - birthDate.getFullYear();
                const monthDiff = today.getMonth() - birthDate.getMonth();
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                document.getElementById('age').value = age;
            }
        }

        function validateForm() {
            let isValid = true;
            const fields = ['firstname', 'lastname', 'f_firstname', 'f_lastname', 'm_firstname', 'm_lastname', 'gender', 'dob', 'mobile', 'address', 'reason'];
            fields.forEach((id) => {
                const field = document.getElementById(id);
                const errorSpan = document.getElementById(id + 'Error');
                if (field && field.value.trim() === "") {
                    if (errorSpan) errorSpan.textContent = "This field is required.";
                    isValid = false;
                } else if (errorSpan) {
                    errorSpan.textContent = "";
                }
            });

            const mobile = document.getElementById('mobile').value;
            if (mobile && (mobile.length !== 10 || isNaN(mobile))) {
                document.getElementById('mobileError').textContent = "Please enter a valid 10-digit mobile number.";
                isValid = false;
            }

            return isValid;
        }
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>